<!DOCTYPE html>
<html lang="en">
<head>
  <title>Azul GUI Framework</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="description" content="Cross-platform LGPL-licensed desktop GUI framework for C and Rust using the Mozilla WebRender rendering engine">
  <meta name="keywords" content="gui, rust, user interface">

  <link rel="preload" as="font" crossorigin='anonymous' href="./fonts/SourceSerifPro-Regular.ttf" type="font/ttf">
  <link rel="preload" as="font" crossorigin='anonymous' href="./fonts/Morris Jenson Initialen.ttf" type="font/ttf">

  <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
  <link rel="stylesheet" type="text/css" href="./main.css">
  <!-- index.css -->
  <style>
    main .col-1 {
      float:left;
      max-width: 500px;
    }
    main header {
      margin-bottom: 30px;
    }
    main header h2 {
      margin-top: -10px;
      margin-bottom: 40px;
      font-size: 3em;
      font-weight: 100;
    }
    main header h2 .first-letter {
      display: inline-block;
      float: left;
      margin-right: 5px;
      font-family: "Morris Jenson Initialen", serif;
      font-weight: 500;
      font-size: 2.25em;
    }
    main header h3 {
      margin-top: 25px;
      font-size: 1.2rem;
      font-weight: normal;
    }
    main section .col-1 {
      float: left;
      padding-right: 25px;
    }
    body > .center > main > section > .col-1 code {
      display: block;
      max-width: 500px;
    }

    .stats {
      font-weight: bold;
      float: left;
    }
    .stats ul li {
      list-style-type: none;
    }
    .controls:after {
      clear: both;
    }
    .controls > span:first-child > button > img {
      padding-left: 10px;
    }

    .controls > span:last-child > button > img {
      padding-left: 10px;
      transform: rotate(180deg);
    }

    .controls > span > button > img {
      display: inline-block;
      vertical-align: middle;
    }
    .controls {
      overflow: hidden;
    }
    .controls > * {
      float: right;
      margin-left: 10px;
    }
    .gradient-border-wrap {
      padding: 1px;
      border-radius: 5px;
      background: radial-gradient(ellipse farthest-corner at right bottom,#fedb37 0,#fdb931 8%,#9f7928 30%,#8a6e2f 40%,transparent 80%),
                  radial-gradient(ellipse farthest-corner at left top,#fff 0,#ffffac 8%,#d1b464 25%,#5d4a1f 62.5%,#5d4a1f 100%);
    }
    .controls .gradient-border-wrap button {
      background: #333;
      color: #eee;
      cursor: pointer;
      font-size: 1.2em;
      padding: 10px;
      appearance: none;
      -webkit-appearance: none;
      border: none;
      border-radius: 5px;
    }
    .description {
      clear: both;
      margin-top: 20px;
      font-size: 1.2em;
    }

    .feature > img {
      max-width: 100%;
      margin-bottom: 10px;
      height: auto;
    }

    body > .center > main > .code-container {
      display: inline-block;
      max-width: none;
      margin-left: 0px;
      width: 100%;
    }

    body > .center > main > .code-container > .select-language > button.active {
      background: #0084ff;
      color: white;
    }
    body > .center > main > .code-container > .select-language > button {
      font-size: 16px;
      border: none;
      padding: 5px 15px;
      margin-right: 5px;
      cursor:pointer;
      font-weight: bold;
      font-family: monospace;
    }

    body > .center > main > .code-container > code {
      display: block;
      padding: 10px;
    }
    @media screen and (min-width: 720px) {
      body > .center > main > .code-container > code {
        min-width: 500px;
      }
    }
    @media screen and (max-width: 1418px) {
      body > .center > main > .code-container {
        margin-top: 20px;
      }
    }
    @media screen and (min-width: 1418px) {
      body > .center > main > .code-container {
        max-width: 560px;
        margin-left: 40px;
        margin-top: 0px;
      }
    }
    @media screen and (max-width: 720px) {
      body > .center > main > .code-container > code {
        min-width: none;
      }
      body > .center > main > section > .col-2 {
        max-width: none;
        float: none;
        margin-bottom: 0px;
      }
      body > .center > main > section > .col-1 {
        float: none;
        padding-right: 0px;
        margin-right: 0px;
        margin-bottom: 20px;
      }
      body > .center > aside {
        float: none;
        position: static !important;
      }
      body main .col-1 header h2 {
        font-size: 30px;
        margin-bottom: 0px;
      }
      .feature {
        float:none;
        margin-bottom: 50px;
      }
    }
  </style>
</head>

<body>
  <div class="center">
  <aside>
    <header>
      <h1 style="display:none;">Azul GUI Framework</h1>
      <img src="./logo.svg">
    </header>
    <nav>
      <ul>
        <li class="active"><a href="https://azul.rs">overview</a></li>
        <li><a href="https://azul.rs/releases">releases</a></li>
        <li><a href="https://github.com/maps4print/azul">code</a></li>
        <li><a href="https://matrix.to/#/#azul:matrix.org">chat</a></li>
        <li><a href="https://azul.rs/guide">guide</a></li>
        <li><a href="https://azul.rs/api">api</a></li>
      </ul>
    </nav>
  </aside>
  <main>
    <div class="col-1">
      <header>
        <h2><span class="first-letter">B</span>uilt for beauty<br/>and speed</h2>
        <h3>Cross-platform LGPL-licensed desktop GUI framework for C and Rust, backed by the Mozilla WebRender rendering engine.</h3>
      </header>
      <section class="feature">
        <img class="showcase" id="showcase-image" src="https://azul.rs/images/helloworld.png" alt="Rendering a simple UI using the Azul GUI toolkit">
        <div>
          <div class="stats">
            <ul>
              <li id="showcase-stats-memory">Memory: 23MB</li>
              <li id="showcase-stats-cpu">CPU: 0%</li>
            </ul>
          </div>
          <div class="controls">
            <span class="gradient-border-wrap">
              <button onclick="next()">Next<img src="./images/fleur-de-lis.svg"/></button>
            </span>
            <span class="gradient-border-wrap">
              <button onclick="previous()"><img src="./images/fleur-de-lis.svg"/>Previous</button>
            </span>
          </div>
          <div class="description">
            <p id="showcase-description">The UI structure is created via composition instead of inheritance.                Callbacks can modify the application data and then tell the framework to                reconstruct the entire UI again - but only if it's necessary, not on every frame.</p>
          </div>
        </div>
      </section>
    </div>
    <div class="code-container">
      <div class="select-language">
        <button id="select-language-python" class="select-language-btn active" onclick="select_python_code()">Python</button>
        <button id="select-language-cpp" class="select-language-btn" onclick="select_cpp_code()">C++</button>
        <button id="select-language-rust" class="select-language-btn" onclick="select_rust_code()">Rust</button>
        <button id="select-language-c" class="select-language-btn" onclick="select_c_code()">C</button>
      </div>
      <code class="language-c" id="code">from&nbsp;azul&nbsp;import&nbsp;*<br/><br/>css&nbsp;=&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;.__azul-native-label&nbsp;{&nbsp;font-size:&nbsp;50px;&nbsp;}<br/>&quot;&quot;&quot;<br/><br/>class&nbsp;DataModel:<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;counter):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.counter&nbsp;=&nbsp;counter<br/><br/>#&nbsp;model&nbsp;-&gt;&nbsp;view<br/>def&nbsp;my_layout_func(data,&nbsp;info):<br/>&nbsp;&nbsp;&nbsp;&nbsp;label&nbsp;=&nbsp;Label(&quot;{}&quot;.format(data.counter))<br/>&nbsp;&nbsp;&nbsp;&nbsp;button&nbsp;=&nbsp;Button(&quot;Update&nbsp;counter&quot;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;button.set_on_click(data,&nbsp;my_on_click)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;dom&nbsp;=&nbsp;Dom.body()<br/>&nbsp;&nbsp;&nbsp;&nbsp;dom.add_child(label.dom())<br/>&nbsp;&nbsp;&nbsp;&nbsp;dom.add_child(button.dom())<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;dom.style(Css.from_string(css))<br/><br/>#&nbsp;model&nbsp;&lt;-&nbsp;view<br/>def&nbsp;my_on_click(data,&nbsp;info):<br/>&nbsp;&nbsp;&nbsp;&nbsp;data.counter&nbsp;+=&nbsp;1;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;tell&nbsp;azul&nbsp;to&nbsp;call&nbsp;the&nbsp;myLayoutFunc&nbsp;again<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Update.RefreshDom<br/><br/>model&nbsp;=&nbsp;DataModel(5)<br/>app&nbsp;=&nbsp;App(model,&nbsp;AppConfig(LayoutSolver.Default))<br/>app.run(WindowCreateOptions(my_layout_func))</code>
    </div>
  </main>
  </div>
  <!-- <script async type="text/javascript" src="./prism_code_highlighter.js"></script> -->
  <script type="text/javascript" async>
    var examples = [
      [{"id": "helloworld", "description": "The UI structure is created via composition instead of inheritance.                Callbacks can modify the application data and then tell the framework to                reconstruct the entire UI again - but only if it's necessary, not on every frame.", "screenshot_path": "C:\\Users\\Felix Sch\u00fctt\\Development\\azul/examples/assets/screenshots/helloworld.png", "screenshot_url": "https://azul.rs/images/helloworld.png", "cpu": "CPU: 0%", "memory": "Memory: 23MB", "image_alt": "Rendering a simple UI using the Azul GUI toolkit", "code:c": "#include&nbsp;&lt;azul.h&gt;<br/>#include&nbsp;&lt;stdio.h&gt;<br/><br/>typedef&nbsp;struct&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;uint32_t&nbsp;counter;<br/>}&nbsp;MyDataModel;<br/><br/>void&nbsp;DataModel_delete(MyDataModel*&nbsp;restrict&nbsp;A)&nbsp;{&nbsp;}<br/>AZ_REFLECT(MyDataModel,&nbsp;MyDataModel_delete);<br/><br/>AzString&nbsp;css&nbsp;=&nbsp;AzString_fromConstStr(&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;.__azul-native-label&nbsp;{&nbsp;font-size:&nbsp;50px;&nbsp;}<br/>&quot;);<br/><br/>//&nbsp;model&nbsp;-&gt;&nbsp;view<br/>AzStyledDom&nbsp;myLayoutFunc(AzRefAny*&nbsp;restrict&nbsp;data,&nbsp;AzLayoutInfo&nbsp;info)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;MyDataModelRef&nbsp;d&nbsp;=&nbsp;MyDataModelRef_create(data);<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!(DataModel_downcastRef(data,&nbsp;&d))&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;AzStyledDom_empty();&nbsp;//&nbsp;error<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;buffer&nbsp;[20];<br/>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;written&nbsp;=&nbsp;snprintf(buffer,&nbsp;20,&nbsp;&quot;%d&quot;,&nbsp;d-&gt;counter);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;AzString&nbsp;const&nbsp;labelstring&nbsp;=&nbsp;AzString_copyFromBytes(&buffer,&nbsp;0,&nbsp;written);<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzLabel&nbsp;const&nbsp;label&nbsp;=&nbsp;AzLabel_new(labelstring);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;AzString&nbsp;const&nbsp;buttonstring&nbsp;=&nbsp;AzString_fromConstStr(&quot;Increase&nbsp;counter&quot;);<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzButton&nbsp;button&nbsp;=&nbsp;AzButton_new(buttonstring,&nbsp;AzRefAny_clone(data));<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzButton_setOnClick(&button,&nbsp;myOnClick);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;AzDom&nbsp;body&nbsp;=&nbsp;AzDom_body();<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzDom_addChild(&body,&nbsp;AzLabel_dom(label));<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzDom_addChild(&body,&nbsp;AzButton_dom(button));<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;MyDataModelRef_delete(&d);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;AzStyledDom_new(html,&nbsp;AzCss_fromString(css));<br/>}<br/><br/>//&nbsp;model&nbsp;&lt;-&nbsp;view<br/>AzUpdate&nbsp;myOnClick(AzRefAny*&nbsp;restrict&nbsp;data,&nbsp;AzCallbackInfo&nbsp;info)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;MyDataModelRefMut&nbsp;d&nbsp;=&nbsp;MyDataModelRefMut_create(data);<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!(DataModel_downcastRefMut(data,&nbsp;&d))&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;AzUpdate_DoNothing;&nbsp;//&nbsp;error<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;increase&nbsp;counter<br/>&nbsp;&nbsp;&nbsp;&nbsp;d-&gt;counter&nbsp;+=&nbsp;1;<br/>&nbsp;&nbsp;&nbsp;&nbsp;MyDataModelRefMut_delete(&d);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;tell&nbsp;azul&nbsp;to&nbsp;call&nbsp;the&nbsp;myLayoutFunc&nbsp;again<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;AzUpdate_RefreshDom;<br/>}<br/><br/>int&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;MyDataModel&nbsp;model&nbsp;=&nbsp;{&nbsp;.counter&nbsp;=&nbsp;5&nbsp;};<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzRefAny&nbsp;upcasted&nbsp;=&nbsp;MyDataModel_upcast(model);<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzApp&nbsp;app&nbsp;=&nbsp;AzApp_new(upcasted,&nbsp;AzAppConfig_default());<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzApp_run(app,&nbsp;AzWindowCreateOptions_new(myLayoutFunc));<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br/>}", "code:cpp": "#include&nbsp;&lt;azul.h&gt;<br/>#include&nbsp;&lt;stdio.h&gt;<br/><br/>struct&nbsp;MyDataModel&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;uint32_t&nbsp;counter;<br/>};<br/><br/>static&nbsp;css&nbsp;=&nbsp;String::fromConstStr(<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;.__azul-native-label&nbsp;{&nbsp;font-size:&nbsp;50px;&nbsp;}&quot;<br/>);<br/><br/>//&nbsp;model&nbsp;-&gt;&nbsp;view<br/>StyledDom&nbsp;myLayoutFunc(RefAny*&nbsp;restrict&nbsp;data,&nbsp;LayoutInfo&nbsp;info)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;auto&nbsp;d&nbsp;=&nbsp;data.createRef::&lt;MyDataModel&gt;(data);<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!data.downcastRef(data,&nbsp;&d)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;StyledDom::empty();&nbsp;//&nbsp;error<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;buffer&nbsp;[20];<br/>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;written&nbsp;=&nbsp;snprintf(buffer,&nbsp;20,&nbsp;&quot;%d&quot;,&nbsp;d-&gt;counter);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;auto&nbsp;const&nbsp;labelstring&nbsp;=&nbsp;String::copyFromBytes(&buffer,&nbsp;0,&nbsp;written);<br/>&nbsp;&nbsp;&nbsp;&nbsp;auto&nbsp;const&nbsp;label&nbsp;=&nbsp;Label::new(labelstring);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;auto&nbsp;const&nbsp;buttonstring&nbsp;=&nbsp;String::fromConstStr(&quot;Increase&nbsp;counter&quot;);<br/>&nbsp;&nbsp;&nbsp;&nbsp;auto&nbsp;const&nbsp;button&nbsp;=&nbsp;Button::new(buttonstring)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withOnClick(myOnClick,&nbsp;data.clone());<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Dom::body()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withChild(label.dom())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withChild(button.dom())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.style(Css::fromString(css));<br/>}<br/><br/>Update&nbsp;myOnClick(RefAny*&nbsp;restrict&nbsp;data,&nbsp;CallbackInfo&nbsp;info)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;auto&nbsp;d&nbsp;=&nbsp;data.createRefMut::&lt;MyDataModel&gt;(data);<br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!data.downcastRefMut(data,&nbsp;&d)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Update::DoNothing;&nbsp;//&nbsp;error<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;d-&gt;counter&nbsp;+=&nbsp;1;&nbsp;//&nbsp;increase&nbsp;counter<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;tell&nbsp;azul&nbsp;to&nbsp;call&nbsp;the&nbsp;myLayoutFunc&nbsp;again<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Update::RefreshDom;<br/>}<br/><br/>int&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;MyDataModel&nbsp;model&nbsp;=&nbsp;{&nbsp;.counter&nbsp;=&nbsp;5&nbsp;};<br/>&nbsp;&nbsp;&nbsp;&nbsp;AzApp&nbsp;app&nbsp;=&nbsp;App_new(RefAny::new(model),&nbsp;AppConfig_default());<br/>&nbsp;&nbsp;&nbsp;&nbsp;app.run(WindowCreateOptions::new(myLayoutFunc));<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br/>}", "code:rust": "use&nbsp;azul::prelude::*;<br/>use&nbsp;azul::str::String&nbsp;as&nbsp;AzString;<br/><br/>struct&nbsp;DataModel&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;counter:&nbsp;usize,<br/>}<br/><br/>static&nbsp;CSS:&nbsp;AzString&nbsp;=&nbsp;AzString::from_const_str(&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;.__azul-native-label&nbsp;{&nbsp;font-size:&nbsp;50px;&nbsp;}<br/>&quot;);<br/><br/>extern&nbsp;&quot;C&quot;&nbsp;fn&nbsp;myLayoutFunc(data:&nbsp;&mut&nbsp;RefAny,&nbsp;_:&nbsp;LayoutCallbackInfo)&nbsp;-&gt;&nbsp;StyledDom&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;d&nbsp;=&nbsp;match&nbsp;data.downcast_ref::&lt;DataModel&gt;()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some(s)&nbsp;=&gt;&nbsp;s,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None&nbsp;=&gt;&nbsp;return&nbsp;StyledDom::default(),<br/>&nbsp;&nbsp;&nbsp;&nbsp;};<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;label&nbsp;=&nbsp;Label::new(format!(&quot;{}&quot;,&nbsp;d.counter));<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;button&nbsp;=&nbsp;Button::new(&quot;Update&nbsp;counter&quot;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_on_click(data.clone(),&nbsp;myOnClick);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;Dom::body()<br/>&nbsp;&nbsp;&nbsp;&nbsp;.with_child(label.dom())<br/>&nbsp;&nbsp;&nbsp;&nbsp;.with_child(button.dom())<br/>&nbsp;&nbsp;&nbsp;&nbsp;.style(Css::from_string(CSS))<br/>}<br/><br/>extern&nbsp;&quot;C&quot;&nbsp;fn&nbsp;myOnClick(data:&nbsp;&mut&nbsp;RefAny,&nbsp;_:&nbsp;CallbackInfo)&nbsp;-&gt;&nbsp;Update&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;data&nbsp;=&nbsp;match&nbsp;data.downcast_mut::&lt;DataModel&gt;()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some(s)&nbsp;=&gt;&nbsp;s,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None&nbsp;=&gt;&nbsp;return&nbsp;Update::DoNothing,&nbsp;//&nbsp;error<br/>&nbsp;&nbsp;&nbsp;&nbsp;};<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;data.counter&nbsp;+=&nbsp;1;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;Update::RefreshDom<br/>}<br/><br/>fn&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;data&nbsp;=&nbsp;DataModel&nbsp;{&nbsp;counter:&nbsp;0&nbsp;};<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;app&nbsp;=&nbsp;App::new(RefAny::new(data),&nbsp;AppConfig::new(LayoutSolver::Default));<br/>&nbsp;&nbsp;&nbsp;&nbsp;app.run(WindowCreateOptions::new(myLayoutFunc));<br/>}", "code:python": "from&nbsp;azul&nbsp;import&nbsp;*<br/><br/>css&nbsp;=&nbsp;&quot;&quot;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;.__azul-native-label&nbsp;{&nbsp;font-size:&nbsp;50px;&nbsp;}<br/>&quot;&quot;&quot;<br/><br/>class&nbsp;DataModel:<br/>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;counter):<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.counter&nbsp;=&nbsp;counter<br/><br/>#&nbsp;model&nbsp;-&gt;&nbsp;view<br/>def&nbsp;my_layout_func(data,&nbsp;info):<br/>&nbsp;&nbsp;&nbsp;&nbsp;label&nbsp;=&nbsp;Label(&quot;{}&quot;.format(data.counter))<br/>&nbsp;&nbsp;&nbsp;&nbsp;button&nbsp;=&nbsp;Button(&quot;Update&nbsp;counter&quot;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;button.set_on_click(data,&nbsp;my_on_click)<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;dom&nbsp;=&nbsp;Dom.body()<br/>&nbsp;&nbsp;&nbsp;&nbsp;dom.add_child(label.dom())<br/>&nbsp;&nbsp;&nbsp;&nbsp;dom.add_child(button.dom())<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;dom.style(Css.from_string(css))<br/><br/>#&nbsp;model&nbsp;&lt;-&nbsp;view<br/>def&nbsp;my_on_click(data,&nbsp;info):<br/>&nbsp;&nbsp;&nbsp;&nbsp;data.counter&nbsp;+=&nbsp;1;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;tell&nbsp;azul&nbsp;to&nbsp;call&nbsp;the&nbsp;myLayoutFunc&nbsp;again<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Update.RefreshDom<br/><br/>model&nbsp;=&nbsp;DataModel(5)<br/>app&nbsp;=&nbsp;App(model,&nbsp;AppConfig(LayoutSolver.Default))<br/>app.run(WindowCreateOptions(my_layout_func))"}, {"id": "table", "description": "Azul supports lazy loading and can render infinitely large datasets                (such as a table, shown here) while using a comparably small amount of memory.                DOM nodes share their CSS style efficiently via pointers,                so that properties do not get duplicated in memory.", "screenshot_path": "C:\\Users\\Felix Sch\u00fctt\\Development\\azul/examples/assets/screenshots/table.png", "screenshot_url": "https://azul.rs/images/table.png", "cpu": "CPU: 0%", "memory": "Memory: 23MB", "image_alt": "Rendering a table using the Azul GUI toolkit", "code:c": "#include&nbsp;&lt;azul.h&gt;<br/>#include&nbsp;&lt;azul-widgets.h&gt;<br/><br/>int&nbsp;main()&nbsp;{&nbsp;return&nbsp;0;&nbsp;}", "code:cpp": "#include&nbsp;&lt;azul.h&gt;<br/><br/>int&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br/>}", "code:rust": "#![cfg_attr(not(debug_assertions),&nbsp;windows_subsystem&nbsp;=&nbsp;&quot;windows&quot;)]<br/><br/>use&nbsp;azul::prelude::*;<br/>use&nbsp;azul_widgets::table_view::*;<br/><br/>struct&nbsp;TableDemo&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;cells:&nbsp;BTreeMap&lt;TableCell,&nbsp;String&gt;,<br/>}<br/><br/>extern&nbsp;&quot;C&quot;&nbsp;fn&nbsp;layout(data:&nbsp;&mut&nbsp;RefAny,&nbsp;_:&nbsp;LayoutCallbackInfo)&nbsp;-&gt;&nbsp;StyledDom&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;table_view_state&nbsp;=&nbsp;TableViewState::default();<br/>&nbsp;&nbsp;&nbsp;&nbsp;table_view_state.set_cell_content(TableCellIndex&nbsp;{&nbsp;row:&nbsp;2,&nbsp;column:&nbsp;2&nbsp;},&nbsp;&quot;Hello&nbsp;World&quot;);<br/>&nbsp;&nbsp;&nbsp;&nbsp;table_view_state.set_selection(Some(TableCellSelection::from(3,&nbsp;4).to(3,&nbsp;4)));<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;TableView::new(table_view_state).dom().style(Css::empty())<br/>}<br/><br/>fn&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;app&nbsp;=&nbsp;App::new(RefAny::new(TableDemo&nbsp;{&nbsp;}),&nbsp;AppConfig::new(LayoutSolver::Default));<br/>&nbsp;&nbsp;&nbsp;&nbsp;app.run(WindowCreateOptions::new(layout));<br/>}<br/>", "code:python": "from&nbsp;azul&nbsp;import&nbsp;*<br/><br/>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;pass"}, {"id": "svg", "description": "Azul contains a SVG1.1 compatible SVG renderer as well as functions                for tesselating and drawing shapes to OpenGL textures. Images / textures                can be composited as clip masks and even be animated.", "screenshot_path": "C:\\Users\\Felix Sch\u00fctt\\Development\\azul/examples/assets/screenshots/svg.png", "screenshot_url": "https://azul.rs/images/svg.png", "cpu": "CPU: 0%", "memory": "Memory: 23MB", "image_alt": "Rendering a SVG file using the Azul GUI toolkit", "code:c": "", "code:cpp": "#include&nbsp;&lt;azul.h&gt;<br/><br/>int&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br/>}", "code:rust": "#![cfg_attr(not(debug_assertions),&nbsp;windows_subsystem&nbsp;=&nbsp;&quot;windows&quot;)]<br/><br/>use&nbsp;azul::prelude::*;<br/><br/>const&nbsp;CSS:&nbsp;&str&nbsp;=&nbsp;&quot;<br/>#svg-container&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;100%;<br/>&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;100%;<br/>}<br/><br/>.control-btn&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;20px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;20px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;position:&nbsp;absolute;<br/>&nbsp;&nbsp;&nbsp;&nbsp;text-align:&nbsp;center;<br/>&nbsp;&nbsp;&nbsp;&nbsp;flex-direction:&nbsp;column;<br/>&nbsp;&nbsp;&nbsp;&nbsp;justify-content:&nbsp;center;<br/>&nbsp;&nbsp;&nbsp;&nbsp;align-items:&nbsp;center;<br/>&nbsp;&nbsp;&nbsp;&nbsp;box-sizing:&nbsp;border-box;<br/>}<br/><br/>#btn-zoom-in&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;top:&nbsp;30px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;30px;<br/>}<br/><br/>#btn-zoom-out&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;top:&nbsp;30px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;70px;<br/>}<br/><br/>#btn-move-up&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;top:&nbsp;70px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;50px;<br/>}<br/><br/>#btn-move-right&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;top:&nbsp;90px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;70px;<br/>}<br/><br/>#btn-move-left&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;top:&nbsp;90px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;30px;<br/>}<br/><br/>#btn-move-down&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;top:&nbsp;110px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;50px;<br/>}<br/>&quot;;<br/><br/>const&nbsp;SVG:&nbsp;&str&nbsp;=&nbsp;include_str!(concat!(env!(&quot;CARGO_MANIFEST_DIR&quot;),&nbsp;&quot;/../../assets/svg/tiger.svg&quot;));<br/><br/>#[derive(Debug)]<br/>struct&nbsp;MyAppData&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;svg:&nbsp;Ref&lt;SvgDocument&gt;,<br/>}<br/><br/>#[derive(Debug)]<br/>struct&nbsp;SvgDocument&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;cache:&nbsp;SvgCache,<br/>&nbsp;&nbsp;&nbsp;&nbsp;layers:&nbsp;Vec&lt;(SvgLayerId,&nbsp;SvgStyle)&gt;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;zoom:&nbsp;f32,<br/>&nbsp;&nbsp;&nbsp;&nbsp;pan_horz:&nbsp;f32,<br/>&nbsp;&nbsp;&nbsp;&nbsp;pan_vert:&nbsp;f32,<br/>}<br/><br/>type&nbsp;CbInfo&lt;'a&gt;&nbsp;=&nbsp;CallbackInfo&lt;'a,&nbsp;MyAppData&gt;;<br/><br/>impl&nbsp;Layout&nbsp;for&nbsp;MyAppData&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;layout(&self,&nbsp;_info:&nbsp;LayoutInfo)&nbsp;-&gt;&nbsp;Dom&lt;MyAppData&gt;&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dom::gl_texture(draw_svg,&nbsp;self.svg.clone())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_callback(On::Scroll,&nbsp;scroll_map_contents).with_id(&quot;svg-container&quot;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_control_btn(&quot;+&quot;,&nbsp;&quot;btn-zoom-in&quot;,&nbsp;&nbsp;&nbsp;&nbsp;|info:&nbsp;CbInfo|&nbsp;{&nbsp;info.state.svg.borrow_mut().zoom&nbsp;*=&nbsp;2.0;&nbsp;Redraw&nbsp;}))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_control_btn(&quot;-&quot;,&nbsp;&quot;btn-zoom-out&quot;,&nbsp;&nbsp;&nbsp;|info:&nbsp;CbInfo|&nbsp;{&nbsp;info.state.svg.borrow_mut().zoom&nbsp;/=&nbsp;2.0;&nbsp;Redraw&nbsp;}))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_control_btn(&quot;^&quot;,&nbsp;&quot;btn-move-up&quot;,&nbsp;&nbsp;&nbsp;&nbsp;|info:&nbsp;CbInfo|&nbsp;{&nbsp;info.state.svg.borrow_mut().pan_vert&nbsp;+=&nbsp;100.0;&nbsp;Redraw&nbsp;}))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_control_btn(&quot;&gt;&quot;,&nbsp;&quot;btn-move-right&quot;,&nbsp;|info:&nbsp;CbInfo|&nbsp;{&nbsp;info.state.svg.borrow_mut().pan_horz&nbsp;+=&nbsp;100.0;&nbsp;Redraw&nbsp;}))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_control_btn(&quot;&lt;&quot;,&nbsp;&quot;btn-move-left&quot;,&nbsp;&nbsp;|info:&nbsp;CbInfo|&nbsp;{&nbsp;info.state.svg.borrow_mut().pan_horz&nbsp;-=&nbsp;100.0;&nbsp;Redraw&nbsp;}))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_control_btn(&quot;v&quot;,&nbsp;&quot;btn-move-down&quot;,&nbsp;&nbsp;|info:&nbsp;CbInfo|&nbsp;{&nbsp;info.state.svg.borrow_mut().pan_vert&nbsp;-=&nbsp;100.0;&nbsp;Redraw&nbsp;}))<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/>}<br/><br/>fn&nbsp;render_control_btn(label:&nbsp;&'static&nbsp;str,&nbsp;css_id:&nbsp;&'static&nbsp;str,&nbsp;callback:&nbsp;fn(CbInfo)&nbsp;-&gt;&nbsp;UpdateScreen)&nbsp;-&gt;&nbsp;Dom&lt;MyAppData&gt;&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;Button::with_label(label).dom().with_class(&quot;control-btn&quot;).with_id(css_id).with_callback(On::MouseUp,&nbsp;callback)<br/>}<br/><br/>fn&nbsp;draw_svg(info:&nbsp;GlCallbackInfo)&nbsp;-&gt;&nbsp;GlCallbackReturn&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;azul::widgets::svg::SvgLayerResource::*;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;state&nbsp;=&nbsp;info.state.downcast::&lt;SvgDocument&gt;()?;<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;map:&nbsp;&SvgDocument&nbsp;=&nbsp;&state.borrow();<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;logical_size&nbsp;=&nbsp;info.bounds.get_logical_size();<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;svg&nbsp;=&nbsp;Svg::with_layers(map.layers.iter().map(|e|&nbsp;Reference(*e)).collect())<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_pan(map.pan_horz,&nbsp;map.pan_vert)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_zoom(map.zoom)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.render_svg(<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&map.cache,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info.layout_info.gl_context.clone(),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info.bounds.hidpi_factor,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logical_size<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;Some(svg)<br/>}<br/><br/>fn&nbsp;scroll_map_contents(info:&nbsp;CbInfo)&nbsp;-&gt;&nbsp;UpdateScreen&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;scroll_y&nbsp;=&nbsp;info.get_mouse_state().scroll_y?;<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;keyboard_state&nbsp;=&nbsp;info.get_keyboard_state().clone();<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;svg&nbsp;=&nbsp;info.state.svg.borrow_mut();<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;keyboard_state.shift_down&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg.pan_horz&nbsp;+=&nbsp;scroll_y;<br/>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;keyboard_state.ctrl_down&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;scroll_y.is_sign_positive()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg.zoom&nbsp;/=&nbsp;2.0;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg.zoom&nbsp;*=&nbsp;2.0;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg.pan_vert&nbsp;+=&nbsp;scroll_y;<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;Redraw<br/>}<br/><br/>fn&nbsp;main()&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;svg_cache&nbsp;=&nbsp;SvgCache::empty();<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;svg_layers&nbsp;=&nbsp;svg_cache.add_svg(&SVG).unwrap();<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;app_data&nbsp;=&nbsp;MyAppData&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg:&nbsp;Ref::new(SvgDocument&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cache:&nbsp;svg_cache,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layers:&nbsp;svg_layers,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zoom:&nbsp;1.0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pan_horz:&nbsp;0.0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pan_vert:&nbsp;0.0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}),<br/>&nbsp;&nbsp;&nbsp;&nbsp;};<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;app&nbsp;=&nbsp;App::new(app_data,&nbsp;AppConfig::new(LayoutSolver::Default)).unwrap();<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;css&nbsp;=&nbsp;css::override_native(include_str!(CSS_PATH!())).unwrap();<br/>&nbsp;&nbsp;&nbsp;&nbsp;app.run(WindowCreateOptions::new(css));<br/>}<br/>", "code:python": "from&nbsp;azul&nbsp;import&nbsp;*<br/><br/>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;pass"}, {"id": "calculator", "description": "Composing larger UIs is just a matter of proper function composition.                Widget-specific data is either stored on the callback object itself -                or on the DOM node, similar to a HTML 'dataset' attribute.", "screenshot_path": "C:\\Users\\Felix Sch\u00fctt\\Development\\azul/examples/assets/screenshots/calculator.png", "screenshot_url": "https://azul.rs/images/calculator.png", "cpu": "CPU: 0%", "memory": "Memory: 23MB", "image_alt": "Composing widgets via functions in the Azul GUI toolkit", "code:c": "", "code:cpp": "#include&nbsp;&lt;azul.h&gt;<br/><br/>int&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br/>}", "code:rust": "#![windows_subsystem&nbsp;=&nbsp;&quot;windows&quot;]<br/><br/>use&nbsp;azul::prelude::*;<br/><br/>#[derive(Default)]<br/>pub&nbsp;struct&nbsp;Calculator&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;current_operator:&nbsp;Option&lt;OperandStack&gt;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;current_operand_stack:&nbsp;OperandStack,<br/>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;division_by_zero:&nbsp;bool,<br/>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;expression:&nbsp;String,<br/>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;last_event:&nbsp;Option&lt;Event&gt;,<br/>}<br/><br/>#[derive(Clone,&nbsp;Debug)]<br/>pub&nbsp;enum&nbsp;Event&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;Clear,<br/>&nbsp;&nbsp;&nbsp;&nbsp;InvertSign,<br/>&nbsp;&nbsp;&nbsp;&nbsp;Percent,<br/>&nbsp;&nbsp;&nbsp;&nbsp;Divide,<br/>&nbsp;&nbsp;&nbsp;&nbsp;Multiply,<br/>&nbsp;&nbsp;&nbsp;&nbsp;Subtract,<br/>&nbsp;&nbsp;&nbsp;&nbsp;Plus,<br/>&nbsp;&nbsp;&nbsp;&nbsp;EqualSign,<br/>&nbsp;&nbsp;&nbsp;&nbsp;Dot,<br/>&nbsp;&nbsp;&nbsp;&nbsp;Number(u8),<br/>}<br/><br/>pub&nbsp;mod&nbsp;resources&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;macro_rules!&nbsp;FONT_PATH&nbsp;{()&nbsp;=&gt;&nbsp;{&nbsp;concat!(env!(&quot;CARGO_MANIFEST_DIR&quot;),&nbsp;&quot;/examples/assets/fonts/KoHo-Light.ttf&quot;)};}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;FONT:&nbsp;&[u8]&nbsp;=&nbsp;include_bytes!(FONT_PATH!());<br/>&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;CSS:&nbsp;&str&nbsp;=&nbsp;&quot;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:&nbsp;27px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&nbsp;\\&quot;KoHo-Light\\&quot;;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flex-direction:&nbsp;column;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box-sizing:&nbsp;border-box;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flex-grow:&nbsp;1;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#expression&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max-height:&nbsp;50pt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;#444;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:&nbsp;white;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flex-direction:&nbsp;row;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align:&nbsp;right;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding-right:&nbsp;40pt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;justify-content:&nbsp;flex-end;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#result&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max-height:&nbsp;81pt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background:&nbsp;linear-gradient(to&nbsp;top,&nbsp;#111,&nbsp;#444);<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:&nbsp;white;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flex-direction:&nbsp;row;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align:&nbsp;right;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding-right:&nbsp;16pt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;justify-content:&nbsp;flex-end;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:&nbsp;60px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#numpad-container&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;#d6d6d6;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.numpad-button&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-right:&nbsp;1px&nbsp;solid&nbsp;#8d8d8d;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.row&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flex-direction:&nbsp;row;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-bottom:&nbsp;1px&nbsp;solid&nbsp;#8d8d8d;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height:&nbsp;78px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.orange&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background:&nbsp;linear-gradient(to&nbsp;bottom,&nbsp;#f69135,&nbsp;#f37335);<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:&nbsp;white;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-bottom:&nbsp;1px&nbsp;solid&nbsp;#8d8d8d;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width:&nbsp;98px;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.orange:focus&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border:&nbsp;3px&nbsp;solid&nbsp;blue;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#zero&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flex-grow:&nbsp;2;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-bottom:&nbsp;none;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&quot;;<br/>}<br/><br/>///&nbsp;Handles&nbsp;UI&nbsp;rendering&nbsp;and&nbsp;callback&nbsp;definition<br/>pub&nbsp;mod&nbsp;ui&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;extern&nbsp;&quot;C&quot;&nbsp;fn&nbsp;layout(data:&nbsp;&mut&nbsp;RefAny,&nbsp;_info:&nbsp;LayoutCallbackInfo)&nbsp;-&gt;&nbsp;StyledDom&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;result&nbsp;=&nbsp;if&nbsp;self.division_by_zero&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;format!(&quot;Cannot&nbsp;divide&nbsp;by&nbsp;zero.&quot;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.current_operand_stack.get_display()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dom::div()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(Dom::label(self.expression.to_string()).with_id(&quot;expression&quot;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(Dom::label(result).with_id(&quot;result&quot;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dom::div()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_id(&quot;numpad-container&quot;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_row([&quot;C&quot;,&nbsp;&quot;+/-&quot;,&nbsp;&quot;%&quot;,&nbsp;&quot;/&quot;]))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_row([&quot;7&quot;,&nbsp;&quot;8&quot;,&nbsp;&quot;9&quot;,&nbsp;&quot;x&quot;]))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_row([&quot;4&quot;,&nbsp;&quot;5&quot;,&nbsp;&quot;6&quot;,&nbsp;&quot;-&quot;]))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(render_row([&quot;1&quot;,&nbsp;&quot;2&quot;,&nbsp;&quot;3&quot;,&nbsp;&quot;+&quot;]))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dom::div()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_class(&quot;row&quot;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(numpad_btn(&quot;0&quot;,&nbsp;&quot;numpad-button&quot;).with_id(&quot;zero&quot;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(numpad_btn(&quot;.&quot;,&nbsp;&quot;numpad-button&quot;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(numpad_btn(&quot;=&quot;,&nbsp;&quot;orange&quot;)),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_callback(EventFilter::Window(WindowEventFilter::TextInput),&nbsp;handle_text_input)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_callback(EventFilter::Window(WindowEventFilter::VirtualKeyDown),&nbsp;handle_virtual_key_input)<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#[inline]<br/>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;render_row(labels:&nbsp;[&'static&nbsp;str;&nbsp;4])&nbsp;-&gt;&nbsp;StyledDom&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dom::div()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_class(&quot;row&quot;)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(numpad_btn(labels[0],&nbsp;&quot;numpad-button&quot;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(numpad_btn(labels[1],&nbsp;&quot;numpad-button&quot;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(numpad_btn(labels[2],&nbsp;&quot;numpad-button&quot;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_child(numpad_btn(labels[3],&nbsp;&quot;orange&quot;))<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#[inline]<br/>&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;numpad_btn(label:&nbsp;&'static&nbsp;str,&nbsp;class:&nbsp;&'static&nbsp;str)&nbsp;-&gt;&nbsp;StyledDom&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dom::label(label)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_class(class)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_tab_index(TabIndex::Auto)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_callback(On::MouseUp,&nbsp;handle_mouseclick_numpad_btn)<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;extern&nbsp;&quot;C&quot;&nbsp;fn&nbsp;handle_mouseclick_numpad_btn(data:&nbsp;&mut&nbsp;RefAny,&nbsp;info:&nbsp;CallbackInfo)&nbsp;-&gt;&nbsp;UpdateScreen&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Figure&nbsp;out&nbsp;which&nbsp;row&nbsp;and&nbsp;column&nbsp;was&nbsp;clicked...<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;(clicked_col_idx,&nbsp;clicked_row_idx)&nbsp;=&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;row_iter&nbsp;=&nbsp;info.parent_nodes();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row_iter.next()?;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(info.target_index_in_parent()?,&nbsp;row_iter.current_index_in_parent()?)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Figure&nbsp;out&nbsp;what&nbsp;button&nbsp;was&nbsp;clicked&nbsp;from&nbsp;the&nbsp;given&nbsp;row&nbsp;and&nbsp;column,&nbsp;filter&nbsp;bad&nbsp;events<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;event&nbsp;=&nbsp;match&nbsp;(clicked_row_idx,&nbsp;clicked_col_idx)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0,&nbsp;0)&nbsp;=&gt;&nbsp;Event::Clear,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0,&nbsp;1)&nbsp;=&gt;&nbsp;Event::InvertSign,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0,&nbsp;2)&nbsp;=&gt;&nbsp;Event::Percent,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(0,&nbsp;3)&nbsp;=&gt;&nbsp;Event::Divide,<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1,&nbsp;0)&nbsp;=&gt;&nbsp;Event::Number(7),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1,&nbsp;1)&nbsp;=&gt;&nbsp;Event::Number(8),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1,&nbsp;2)&nbsp;=&gt;&nbsp;Event::Number(9),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1,&nbsp;3)&nbsp;=&gt;&nbsp;Event::Multiply,<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2,&nbsp;0)&nbsp;=&gt;&nbsp;Event::Number(4),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2,&nbsp;1)&nbsp;=&gt;&nbsp;Event::Number(5),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2,&nbsp;2)&nbsp;=&gt;&nbsp;Event::Number(6),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2,&nbsp;3)&nbsp;=&gt;&nbsp;Event::Subtract,<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3,&nbsp;0)&nbsp;=&gt;&nbsp;Event::Number(1),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3,&nbsp;1)&nbsp;=&gt;&nbsp;Event::Number(2),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3,&nbsp;2)&nbsp;=&gt;&nbsp;Event::Number(3),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3,&nbsp;3)&nbsp;=&gt;&nbsp;Event::Plus,<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(4,&nbsp;0)&nbsp;=&gt;&nbsp;Event::Number(0),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(4,&nbsp;1)&nbsp;=&gt;&nbsp;Event::Dot,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(4,&nbsp;2)&nbsp;=&gt;&nbsp;Event::EqualSign,<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;return&nbsp;DontRedraw,&nbsp;//&nbsp;invalid&nbsp;item<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println!(&quot;Got&nbsp;event&nbsp;via&nbsp;mouse&nbsp;input:&nbsp;{:?}&quot;,&nbsp;event);<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_event(info.state,&nbsp;event)<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;extern&nbsp;&quot;C&quot;&nbsp;fn&nbsp;handle_text_input(data:&nbsp;&mut&nbsp;RefAny,&nbsp;info:&nbsp;CallbackInfo)&nbsp;-&gt;&nbsp;UpdateScreen&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;current_key&nbsp;=&nbsp;info.get_keyboard_state().current_char?;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;event&nbsp;=&nbsp;match&nbsp;current_key&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'0'&nbsp;=&gt;&nbsp;Event::Number(0),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'1'&nbsp;=&gt;&nbsp;Event::Number(1),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'2'&nbsp;=&gt;&nbsp;Event::Number(2),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'3'&nbsp;=&gt;&nbsp;Event::Number(3),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'4'&nbsp;=&gt;&nbsp;Event::Number(4),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'5'&nbsp;=&gt;&nbsp;Event::Number(5),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'6'&nbsp;=&gt;&nbsp;Event::Number(6),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'7'&nbsp;=&gt;&nbsp;Event::Number(7),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'8'&nbsp;=&gt;&nbsp;Event::Number(8),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'9'&nbsp;=&gt;&nbsp;Event::Number(9),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'*'&nbsp;=&gt;&nbsp;Event::Multiply,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'-'&nbsp;=&gt;&nbsp;Event::Subtract,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+'&nbsp;=&gt;&nbsp;Event::Plus,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'/'&nbsp;=&gt;&nbsp;Event::Divide,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'%'&nbsp;=&gt;&nbsp;Event::Percent,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.'&nbsp;|&nbsp;','&nbsp;=&gt;&nbsp;Event::Dot,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;return&nbsp;DontRedraw,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println!(&quot;Got&nbsp;event&nbsp;via&nbsp;keyboard&nbsp;input:&nbsp;{:?}&quot;,&nbsp;event);<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_event(info.state,&nbsp;event)<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;extern&nbsp;&quot;C&quot;&nbsp;fn&nbsp;handle_virtual_key_input(data:&nbsp;&mut&nbsp;RefAny,&nbsp;info:&nbsp;CallbackInfo)&nbsp;-&gt;&nbsp;UpdateScreen&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;current_key&nbsp;=&nbsp;info.get_keyboard_state().current_virtual_keycode?;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;event&nbsp;=&nbsp;match&nbsp;current_key&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VirtualKeyCode::Return&nbsp;=&gt;&nbsp;Event::EqualSign,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VirtualKeyCode::Back&nbsp;=&gt;&nbsp;Event::Clear,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;return&nbsp;DontRedraw,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_event(info.state,&nbsp;event)<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/>}<br/><br/>///&nbsp;Handles&nbsp;the&nbsp;application&nbsp;logic<br/>pub&nbsp;mod&nbsp;logic&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#[derive(Debug,&nbsp;Clone,&nbsp;Default)]<br/>&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;struct&nbsp;OperandStack&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;stack:&nbsp;Vec&lt;Number&gt;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;negative_number:&nbsp;bool,<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;#[derive(Debug,&nbsp;Copy,&nbsp;Clone,&nbsp;PartialEq,&nbsp;Eq)]<br/>&nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;Number&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Value(u8),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dot,<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;impl&nbsp;OperandStack&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;///&nbsp;Returns&nbsp;the&nbsp;displayable&nbsp;string,&nbsp;i.e&nbsp;for:<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;///&nbsp;`[3,&nbsp;4,&nbsp;Dot,&nbsp;5]`&nbsp;=&gt;&nbsp;`&quot;34.5&quot;`<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;get_display(&self)&nbsp;-&gt;&nbsp;String&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;display_string&nbsp;=&nbsp;String::new();<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.negative_number&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_string.push('-');<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.stack.is_empty()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_string.push('0');<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;we&nbsp;get&nbsp;a&nbsp;dot&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;stack,&nbsp;i.e.&nbsp;&quot;35.&quot;&nbsp;-&nbsp;store&nbsp;it,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;but&nbsp;don't&nbsp;display&nbsp;it<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;first_dot_found&nbsp;=&nbsp;false;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;num&nbsp;in&nbsp;&self.stack&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;num&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number::Value(v)&nbsp;=&gt;&nbsp;display_string.push((v&nbsp;+&nbsp;48)&nbsp;as&nbsp;char),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number::Dot&nbsp;=&gt;&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!first_dot_found&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_string.push('.');<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first_dot_found&nbsp;=&nbsp;true;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_string<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;///&nbsp;Returns&nbsp;the&nbsp;number&nbsp;which&nbsp;you&nbsp;can&nbsp;use&nbsp;to&nbsp;calculate&nbsp;things&nbsp;with<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pub&nbsp;fn&nbsp;get_number(&self)&nbsp;-&gt;&nbsp;f32&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;stack_size&nbsp;=&nbsp;self.stack.len();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;stack_size&nbsp;==&nbsp;0&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0.0;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Iterate&nbsp;the&nbsp;stack&nbsp;until&nbsp;the&nbsp;first&nbsp;Dot&nbsp;is&nbsp;found<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;first_dot_position&nbsp;=&nbsp;self.stack.iter()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.position(|x|&nbsp;*x&nbsp;==&nbsp;Number::Dot)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.and_then(|x|&nbsp;Some(x&nbsp;-&nbsp;1))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.unwrap_or(stack_size&nbsp;-&nbsp;1)&nbsp;as&nbsp;i32;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;final_number&nbsp;=&nbsp;0.0;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(number_position,&nbsp;number)&nbsp;in&nbsp;self.stack.iter().filter_map(|x|&nbsp;match&nbsp;x&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number::Dot&nbsp;=&gt;&nbsp;None,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number::Value(v)&nbsp;=&gt;&nbsp;Some(v),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.enumerate()<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;i.e.&nbsp;the&nbsp;5&nbsp;in&nbsp;5432.1&nbsp;has&nbsp;a&nbsp;distance&nbsp;of&nbsp;3&nbsp;to&nbsp;the&nbsp;first&nbsp;dot&nbsp;(meaning&nbsp;3&nbsp;zeros)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;diff_to_first_dot&nbsp;=&nbsp;first_dot_position&nbsp;-&nbsp;number_position&nbsp;as&nbsp;i32;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final_number&nbsp;+=&nbsp;(*number&nbsp;as&nbsp;f32)&nbsp;*&nbsp;10.0_f32.powi(diff_to_first_dot);<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.negative_number&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final_number&nbsp;=&nbsp;-final_number;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final_number<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;from_f32(value:&nbsp;f32)&nbsp;-&gt;&nbsp;Self&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;result&nbsp;=&nbsp;OperandStack::default();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;c&nbsp;in&nbsp;value.to_string().chars()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;c&nbsp;==&nbsp;'-'&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.negative_number&nbsp;=&nbsp;true;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;c&nbsp;==&nbsp;'.'&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.stack.push(Number::Dot);<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.stack.push(Number::Value((c&nbsp;as&nbsp;u8&nbsp;-&nbsp;48)&nbsp;as&nbsp;u8))<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;impl&nbsp;Calculator&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;///&nbsp;Act&nbsp;on&nbsp;the&nbsp;event&nbsp;accordingly<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;process_event(&mut&nbsp;self,&nbsp;event:&nbsp;Event)&nbsp;-&gt;&nbsp;UpdateScreen&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;event&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Clear&nbsp;=&gt;&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*calculator&nbsp;=&nbsp;Calculator::default();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Redraw<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::InvertSign&nbsp;=&gt;&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!calculator.division_by_zero&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operand_stack.negative_number&nbsp;=&nbsp;!calculator.current_operand_stack.negative_number;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Redraw<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Percent&nbsp;=&gt;&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;calculator.division_by_zero&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;DontRedraw;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(operation)&nbsp;=&nbsp;&calculator.last_event.clone()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(operand)&nbsp;=&nbsp;calculator.current_operator.clone()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;num&nbsp;=&nbsp;calculator.current_operand_stack.get_number();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;op&nbsp;=&nbsp;operand.get_number();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;result&nbsp;=&nbsp;match&nbsp;operation&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Plus&nbsp;|&nbsp;Event::Subtract&nbsp;=&gt;&nbsp;op&nbsp;/&nbsp;100.0&nbsp;*&nbsp;num,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Multiply&nbsp;|&nbsp;Event::Divide&nbsp;=&gt;&nbsp;num&nbsp;/&nbsp;100.0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;unreachable!(),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operand_stack&nbsp;=&nbsp;OperandStack::from(result);<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Redraw<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::EqualSign&nbsp;=&gt;&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;calculator.division_by_zero&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;DontRedraw;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(Event::EqualSign)&nbsp;=&nbsp;calculator.last_event&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.expression&nbsp;=&nbsp;format!(&quot;{}&nbsp;=&quot;,&nbsp;calculator.current_operand_stack.get_display());<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.expression.push_str(&format!(&quot;{}&nbsp;=&quot;,&nbsp;calculator.current_operand_stack.get_display()));<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(operation)&nbsp;=&nbsp;&calculator.last_event.clone()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(operand)&nbsp;=&nbsp;calculator.current_operator.clone()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;num&nbsp;=&nbsp;calculator.current_operand_stack.get_number();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;op&nbsp;=&nbsp;operand.get_number();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;perform_operation(op,&nbsp;&operation,&nbsp;num)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some(r)&nbsp;=&gt;&nbsp;calculator.current_operand_stack&nbsp;=&nbsp;OperandStack::from(r),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None&nbsp;=&gt;&nbsp;calculator.division_by_zero&nbsp;=&nbsp;true,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operator&nbsp;=&nbsp;None;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.last_event&nbsp;=&nbsp;Some(Event::EqualSign);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Redraw<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Dot&nbsp;=&gt;&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;calculator.division_by_zero&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;DontRedraw;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;calculator.current_operand_stack.stack.iter().position(|x|&nbsp;*x&nbsp;==&nbsp;Number::Dot).is_none()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;calculator.current_operand_stack.stack.len()&nbsp;==&nbsp;0&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operand_stack.stack.push(Number::Value(0));<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operand_stack.stack.push(Number::Dot);<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Redraw<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Number(v)&nbsp;=&gt;&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(Event::EqualSign)&nbsp;=&nbsp;calculator.last_event&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*calculator&nbsp;=&nbsp;Calculator::default();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operand_stack.stack.push(Number::Value(v));<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Redraw<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;operation&nbsp;=&gt;&nbsp;{<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;calculator.division_by_zero&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;DontRedraw;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(Event::EqualSign)&nbsp;=&nbsp;calculator.last_event&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.expression&nbsp;=&nbsp;String::new();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.expression.push_str(&calculator.current_operand_stack.get_display());<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(Event::EqualSign)&nbsp;=&nbsp;calculator.last_event&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operator&nbsp;=&nbsp;Some(calculator.current_operand_stack.clone());<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;let&nbsp;Some(last_operation)&nbsp;=&nbsp;&calculator.last_event.clone()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;let&nbsp;Some(operand)&nbsp;=&nbsp;calculator.current_operator.clone()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;num&nbsp;=&nbsp;calculator.current_operand_stack.get_number();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;op&nbsp;=&nbsp;operand.get_number();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;perform_operation(op,&nbsp;last_operation,&nbsp;num)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some(r)&nbsp;=&gt;&nbsp;calculator.current_operator&nbsp;=&nbsp;Some(OperandStack::from(r)),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None&nbsp;=&gt;&nbsp;calculator.division_by_zero&nbsp;=&nbsp;true,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operator&nbsp;=&nbsp;Some(calculator.current_operand_stack.clone());<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.current_operand_stack&nbsp;=&nbsp;OperandStack::default();<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.expression.push_str(match&nbsp;operation&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Plus&nbsp;=&gt;&nbsp;&quot;&nbsp;+&nbsp;&quot;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Subtract&nbsp;=&gt;&nbsp;&quot;&nbsp;-&nbsp;&quot;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Multiply&nbsp;=&gt;&nbsp;&quot;&nbsp;x&nbsp;&quot;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Divide&nbsp;=&gt;&nbsp;&quot;&nbsp;/&nbsp;&quot;,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;unreachable!(),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calculator.last_event&nbsp;=&nbsp;Some(operation);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Redraw<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;impl&nbsp;Event&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;///&nbsp;Performs&nbsp;an&nbsp;arithmetic&nbsp;operation.&nbsp;Returns&nbsp;None&nbsp;when&nbsp;trying&nbsp;to&nbsp;divide&nbsp;by&nbsp;zero.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;perform_operation(left_operand:&nbsp;f32,&nbsp;right_operand:&nbsp;f32)&nbsp;-&gt;&nbsp;Option&lt;f32&gt;&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;operation&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Multiply&nbsp;=&gt;&nbsp;Some(left_operand&nbsp;*&nbsp;right_operand),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Subtract&nbsp;=&gt;&nbsp;Some(left_operand&nbsp;-&nbsp;right_operand),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Plus&nbsp;=&gt;&nbsp;Some(left_operand&nbsp;+&nbsp;right_operand),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event::Divide&nbsp;=&gt;&nbsp;if&nbsp;right_operand&nbsp;==&nbsp;0.0&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some(left_operand&nbsp;/&nbsp;right_operand)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&gt;&nbsp;unreachable!(),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;}<br/>}<br/><br/>fn&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;app&nbsp;=&nbsp;App::new(Calculator::default(),&nbsp;AppConfig::new(LayoutSolver::Default)).unwrap();<br/>&nbsp;&nbsp;&nbsp;&nbsp;app.add_fomt(&quot;KoHo-Light&quot;,&nbsp;FontRef::embedded(ui::FONT));<br/>&nbsp;&nbsp;&nbsp;&nbsp;app.run(WindowCreateOptions::new(ui::layout));<br/>}<br/>", "code:python": "from&nbsp;azul&nbsp;import&nbsp;*<br/><br/>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;pass"}, {"id": "xml", "description": "Azul contains an XML-based UI description which can be instantly                hot-reloaded from a file. After prototyping the UI in XML / CSS,                you can compile the code to a native language in order to get both                fast design iteration times as well as performant code.", "screenshot_path": "C:\\Users\\Felix Sch\u00fctt\\Development\\azul/examples/assets/screenshots/xml.png", "screenshot_url": "https://azul.rs/images/xml.png", "cpu": "Memory: 0%", "memory": "Memory: 23MB", "image_alt": "XML UI hot-reloading for fast prototyping", "code:c": "", "code:cpp": "#include&nbsp;&lt;azul.h&gt;<br/><br/>int&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br/>}", "code:rust": "#![windows_subsystem&nbsp;=&nbsp;&quot;windows&quot;]<br/><br/>use&nbsp;azul::prelude::*;<br/><br/>#[derive(Debug)]<br/>struct&nbsp;Data&nbsp;{&nbsp;}<br/><br/>extern&nbsp;&quot;C&quot;&nbsp;fn&nbsp;layout(data:&nbsp;&mut&nbsp;RefAny,&nbsp;_info:&nbsp;LayoutCallbackInfo)&nbsp;-&gt;&nbsp;StyledDom&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;StyledDom::from_file(&quot;./ui.xml&quot;.into())<br/>}<br/><br/>fn&nbsp;main()&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;data&nbsp;=&nbsp;RefAny::new(Data&nbsp;{&nbsp;});<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;app&nbsp;=&nbsp;App::new(data,&nbsp;AppConfig::new(LayoutSolver::Default));<br/>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;mut&nbsp;window&nbsp;=&nbsp;WindowCreateOptions::new(layout);<br/>&nbsp;&nbsp;&nbsp;&nbsp;window.hot_reload&nbsp;=&nbsp;true;<br/>&nbsp;&nbsp;&nbsp;&nbsp;app.run(window);<br/>}<br/>", "code:python": "from&nbsp;azul&nbsp;import&nbsp;*<br/><br/>def&nbsp;main():<br/>&nbsp;&nbsp;&nbsp;&nbsp;pass"}]
    ];
    var current_lang = "python";
    var current_example = 0;
    var max_len = examples[0].length;

    function render_example() {
      document.getElementById("showcase-image").src = examples[0][current_example]["screenshot_url"];
      document.getElementById("showcase-image").alt = examples[0][current_example]["image_alt"];
      document.getElementById("showcase-stats-memory").innerHTML = examples[0][current_example]["memory"];
      document.getElementById("showcase-stats-cpu").innerHTML = examples[0][current_example]["cpu"];
      document.getElementById("showcase-description").innerHTML = examples[0][current_example]["description"];

      var language_buttons = document.getElementsByClassName("select-language-btn");
      for (var i = language_buttons.length - 1; i >= 0; i--) {
        language_buttons[i].classList.remove("active");
      }

      if (current_lang === "c") {
        document.getElementById("code").innerHTML = examples[0][current_example]["code:c"];
        document.getElementById("select-language-c").classList.add("active");
      } else if (current_lang === "cpp") {
        document.getElementById("code").innerHTML = examples[0][current_example]["code:cpp"];
        document.getElementById("select-language-cpp").classList.add("active");
      } else if (current_lang === "rust") {
        document.getElementById("code").innerHTML = examples[0][current_example]["code:rust"];
        document.getElementById("select-language-rust").classList.add("active");
      } else {
        document.getElementById("code").innerHTML = examples[0][current_example]["code:python"];
        document.getElementById("select-language-python").classList.add("active");
      }
    }

    function select_c_code() {
      if (current_lang === "c") {
        return;
      }
      current_lang = "c"
      render_example();
    }

    function select_cpp_code() {
      if (current_lang === "cpp") {
        return;
      }
      current_lang = "cpp"
      render_example();
    }

    function select_rust_code() {
      if (current_lang === "rust") {
        return;
      }
      current_lang = "rust"
      render_example();
    }

    function select_python_code() {
      if (current_lang === "python") {
        return;
      }
      current_lang = "python"
      render_example();
    }

    function next() {
      current_example += 1;
      if (current_example >= max_len) {
        current_example = 0;
      }
      render_example();
    }

    function previous() {
      current_example -= 1;
      if (current_example < 0) {
        current_example = max_len - 1;
      }
      render_example();
    }
  </script>
</body>
</html>
